<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Band Finder Game</title>
    <style>
      :root {
        --bg: #0b0f14;
        --panel: #121823;
        --accent: #ffb200;
        --accent-2: #4de0ff;
        --text: #e8f0ff;
        --muted: #9fb2cc;
        --bad: #ff5e5e;
        --good: #6ee7a8;
      }

      * { box-sizing: border-box; }

      body {
        margin: 0;
        font-family: "Space Grotesk", "IBM Plex Sans", "Segoe UI", sans-serif;
        background: radial-gradient(1200px 800px at 10% 10%, #152033 0%, var(--bg) 50%, #070a0f 100%);
        color: var(--text);
        min-height: 100vh;
        display: grid;
        place-items: center;
        padding: 24px;
      }

      .wrap {
        width: min(920px, 100%);
      }

      .header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
        margin-bottom: 20px;
      }

      .title {
        font-size: clamp(28px, 4vw, 40px);
        letter-spacing: 0.5px;
      }

      .subtitle {
        color: var(--muted);
        margin-top: 6px;
        font-size: 15px;
      }

      .panel {
        background: linear-gradient(160deg, #141b27 0%, #0f141e 100%);
        border: 1px solid #1f2b3d;
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.45);
      }

      .band-card {
        display: grid;
        gap: 16px;
        padding: 24px;
        border-radius: 14px;
        border: 1px solid #22314a;
        background: linear-gradient(135deg, #151e2d 0%, #101826 100%);
      }

      .band-name {
        font-size: clamp(30px, 5vw, 46px);
        font-weight: 700;
        letter-spacing: 0.8px;
      }

      .controls {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 12px;
        margin-top: 20px;
      }

      button {
        border: none;
        border-radius: 12px;
        padding: 14px 12px;
        font-size: 14px;
        font-weight: 600;
        letter-spacing: 0.3px;
        cursor: pointer;
        color: #0c1017;
        background: #e5edf7;
        transition: transform 0.08s ease, box-shadow 0.2s ease, background 0.2s ease;
      }

      button:hover { transform: translateY(-2px); }

      .love { background: linear-gradient(135deg, #ffc46b, var(--accent)); }
      .like { background: linear-gradient(135deg, #9cf4ff, var(--accent-2)); }
      .dont { background: linear-gradient(135deg, #c3cedf, #869bb6); }
      .hate { background: linear-gradient(135deg, #ff8f8f, var(--bad)); }
      .never { background: linear-gradient(135deg, #c8fbdc, var(--good)); }

      .status {
        margin-top: 18px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        color: var(--muted);
        font-size: 13px;
      }

      .meter {
        height: 8px;
        background: #1a2435;
        border-radius: 999px;
        overflow: hidden;
        border: 1px solid #22314a;
        flex: 1;
        margin-left: 12px;
      }

      .meter > span {
        display: block;
        height: 100%;
        background: linear-gradient(90deg, #69f0ff, #ffd166);
        width: 0%;
        transition: width 0.3s ease;
      }

      .results {
        margin-top: 24px;
        display: none;
        gap: 14px;
      }

      .results.active { display: grid; }

      .rec {
        padding: 16px;
        border-radius: 12px;
        border: 1px solid #22314a;
        background: rgba(14, 20, 32, 0.85);
      }

      .rec h4 {
        margin: 0 0 6px 0;
        font-size: 18px;
      }

      .rec p {
        margin: 0;
        color: var(--muted);
        font-size: 13px;
      }

      .footer {
        margin-top: 18px;
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .ghost {
        background: transparent;
        color: var(--text);
        border: 1px solid #2a3c56;
      }

      @media (max-width: 640px) {
        .header { flex-direction: column; align-items: flex-start; }
        .status { flex-direction: column; align-items: flex-start; gap: 8px; }
        .meter { margin-left: 0; width: 100%; }
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="header">
        <div>
          <div class="title">Band Finder Game</div>
          <div class="subtitle">Rate bands. We learn. We recommend the “never heard” ones you’ll love.</div>
        </div>
        <div id="scoreBox" class="subtitle"></div>
      </div>

      <div class="panel">
        <div class="band-card">
          <div id="bandName" class="band-name">Loading…</div>
        </div>

        <div class="controls">
          <button class="love" data-rating="love">LOVE</button>
          <button class="like" data-rating="like">LIKE</button>
          <button class="dont" data-rating="dont">DON'T LIKE</button>
          <button class="hate" data-rating="hate">HATE</button>
          <button class="never" data-rating="never">NEVER HEARD OF</button>
        </div>

        <div class="status">
          <div id="progressText">0 rated</div>
          <div class="meter"><span id="meterFill"></span></div>
        </div>

        <div class="results" id="results"></div>

        <div class="footer">
          <button id="finishBtn" class="ghost">Show Me My Recommendations</button>
          <button id="resetBtn" class="ghost">Start Over</button>
        </div>
      </div>
    </div>

    <script>
      const MASTER_BANDS = [
        { name: "The Beatles", tags: ["rock", "60s", "classic"] },
        { name: "The Rolling Stones", tags: ["rock", "60s", "classic"] },
        { name: "The Beach Boys", tags: ["pop", "60s", "harmonies"] },
        { name: "Bob Dylan", tags: ["folk", "60s", "songwriter"] },
        { name: "Jimi Hendrix", tags: ["rock", "psychedelic", "guitar"] },
        { name: "Aretha Franklin", tags: ["soul", "classic", "vocals"] },
        { name: "Stevie Wonder", tags: ["soul", "pop", "classic"] },
        { name: "Marvin Gaye", tags: ["soul", "classic", "smooth"] },
        { name: "The Supremes", tags: ["motown", "60s", "pop"] },
        { name: "Led Zeppelin", tags: ["rock", "70s", "heavy"] },
        { name: "Pink Floyd", tags: ["rock", "progressive", "70s"] },
        { name: "Fleetwood Mac", tags: ["rock", "70s", "pop"] },
        { name: "Queen", tags: ["rock", "arena", "classic"] },
        { name: "David Bowie", tags: ["rock", "art", "70s"] },
        { name: "The Clash", tags: ["punk", "70s", "rock"] },
        { name: "Sex Pistols", tags: ["punk", "70s", "raw"] },
        { name: "Talking Heads", tags: ["art rock", "new wave", "funk"] },
        { name: "Joy Division", tags: ["post-punk", "dark", "classic"] },
        { name: "The Cure", tags: ["goth", "post-punk", "new wave"] },
        { name: "Depeche Mode", tags: ["synth", "new wave", "dark"] },
        { name: "Prince", tags: ["pop", "funk", "80s"] },
        { name: "Michael Jackson", tags: ["pop", "80s", "dance"] },
        { name: "Madonna", tags: ["pop", "80s", "dance"] },
        { name: "Whitney Houston", tags: ["pop", "80s", "vocals"] },
        { name: "U2", tags: ["rock", "80s", "arena"] },
        { name: "The Smiths", tags: ["indie", "jangle", "80s"] },
        { name: "New Order", tags: ["synth", "dance", "80s"] },
        { name: "R.E.M.", tags: ["rock", "80s", "alternative"] },
        { name: "The Police", tags: ["rock", "new wave", "80s"] },
        { name: "Guns N' Roses", tags: ["rock", "hard", "80s"] },
        { name: "Metallica", tags: ["metal", "80s", "thrash"] },
        { name: "Nirvana", tags: ["grunge", "90s", "rock"] },
        { name: "Pearl Jam", tags: ["grunge", "90s", "rock"] },
        { name: "Radiohead", tags: ["alternative", "art rock", "90s"] },
        { name: "Oasis", tags: ["britpop", "90s", "rock"] },
        { name: "Blur", tags: ["britpop", "90s", "rock"] },
        { name: "Green Day", tags: ["punk", "90s", "rock"] },
        { name: "The Smashing Pumpkins", tags: ["alternative", "90s", "rock"] },
        { name: "Beastie Boys", tags: ["hip-hop", "90s", "alternative"] },
        { name: "A Tribe Called Quest", tags: ["hip-hop", "90s", "jazz"] },
        { name: "Outkast", tags: ["hip-hop", "90s", "southern"] },
        { name: "Lauryn Hill", tags: ["hip-hop", "soul", "90s"] },
        { name: "Tupac Shakur", tags: ["hip-hop", "90s", "classic"] },
        { name: "The Notorious B.I.G.", tags: ["hip-hop", "90s", "classic"] },
        { name: "Dr. Dre", tags: ["hip-hop", "90s", "west coast"] },
        { name: "Wu-Tang Clan", tags: ["hip-hop", "90s", "raw"] },
        { name: "Missy Elliott", tags: ["hip-hop", "90s", "innovative"] },
        { name: "Beyonce", tags: ["pop", "r&b", "2000s"] },
        { name: "Rihanna", tags: ["pop", "r&b", "2000s"] },
        { name: "Kanye West", tags: ["hip-hop", "2000s", "producer"] },
        { name: "Jay-Z", tags: ["hip-hop", "2000s", "classic"] },
        { name: "Eminem", tags: ["hip-hop", "2000s", "rap"] },
        { name: "Linkin Park", tags: ["rock", "2000s", "nu metal"] },
        { name: "The Strokes", tags: ["indie rock", "2000s", "nyc"] },
        { name: "The White Stripes", tags: ["garage", "2000s", "rock"] },
        { name: "The Black Keys", tags: ["garage", "2000s", "blues"] },
        { name: "The Killers", tags: ["indie", "2000s", "arena"] },
        { name: "Coldplay", tags: ["rock", "2000s", "arena"] },
        { name: "The Shins", tags: ["indie", "2000s", "jangly"] },
        { name: "Arcade Fire", tags: ["indie", "2000s", "anthemic"] },
        { name: "LCD Soundsystem", tags: ["dance", "2000s", "indie"] },
        { name: "Daft Punk", tags: ["electronic", "house", "2000s"] },
        { name: "Kendrick Lamar", tags: ["hip-hop", "2010s", "lyrical"] },
        { name: "Drake", tags: ["hip-hop", "2010s", "pop"] },
        { name: "Frank Ocean", tags: ["r&b", "2010s", "alt"] },
        { name: "The Weeknd", tags: ["pop", "r&b", "2010s"] },
        { name: "Taylor Swift", tags: ["pop", "2010s", "songwriter"] },
        { name: "Adele", tags: ["pop", "2010s", "vocals"] },
        { name: "Billie Eilish", tags: ["pop", "2010s", "alt"] },
        { name: "Lorde", tags: ["pop", "2010s", "alt"] },
        { name: "Tame Impala", tags: ["psychedelic", "2010s", "indie"] },
        { name: "Arctic Monkeys", tags: ["indie rock", "2000s", "brit"] },
        { name: "Vampire Weekend", tags: ["indie", "2000s", "baroque"] },
        { name: "The National", tags: ["indie", "2000s", "melancholic"] },
        { name: "Phoebe Bridgers", tags: ["indie", "2010s", "folk"] },
        { name: "Mitski", tags: ["indie", "2010s", "art pop"] },
        { name: "SZA", tags: ["r&b", "2010s", "alt"] },
        { name: "Bad Bunny", tags: ["latin", "2010s", "reggaeton"] },
        { name: "Rosalia", tags: ["latin", "2010s", "experimental"] },
        { name: "BTS", tags: ["k-pop", "2010s", "pop"] },
        { name: "BLACKPINK", tags: ["k-pop", "2010s", "pop"] },
        { name: "Shakira", tags: ["latin", "2000s", "pop"] },
        { name: "Daddy Yankee", tags: ["latin", "2000s", "reggaeton"] },
        { name: "Bob Marley", tags: ["reggae", "70s", "classic"] },
        { name: "Fela Kuti", tags: ["afrobeat", "70s", "global"] },
        { name: "Buena Vista Social Club", tags: ["latin", "classic", "son"] },
        { name: "Nusrat Fateh Ali Khan", tags: ["qawwali", "global", "classic"] },
        { name: "Ali Farka Toure", tags: ["world", "blues", "mali"] },
        { name: "Youssou N'Dour", tags: ["world", "senegal", "pop"] },
        { name: "Anoushka Shankar", tags: ["world", "classical", "india"] },
        { name: "Yo-Yo Ma", tags: ["classical", "cello", "modern"] },
        { name: "Beethoven", tags: ["classical", "composer", "romantic"] },
        { name: "Bach", tags: ["classical", "composer", "baroque"] },
        { name: "Mozart", tags: ["classical", "composer", "classical"] },
        { name: "Miles Davis", tags: ["jazz", "classic", "trumpet"] },
        { name: "John Coltrane", tags: ["jazz", "classic", "sax"] },
        { name: "Billie Holiday", tags: ["jazz", "classic", "vocals"] },
        { name: "Ella Fitzgerald", tags: ["jazz", "classic", "vocals"] },
        { name: "Nina Simone", tags: ["jazz", "soul", "classic"] },
        { name: "Ray Charles", tags: ["soul", "classic", "r&b"] },
        { name: "Thelonious Monk", tags: ["jazz", "classic", "piano"] },
        { name: "Duke Ellington", tags: ["jazz", "classic", "big band"] },
        { name: "Norah Jones", tags: ["jazz", "2000s", "smooth"] },
        { name: "Herbie Hancock", tags: ["jazz", "fusion", "classic"] },
        { name: "Tool", tags: ["metal", "progressive", "90s"] },
        { name: "Slipknot", tags: ["metal", "2000s", "heavy"] },
        { name: "Rage Against the Machine", tags: ["rock", "90s", "rap"] },
        { name: "System of a Down", tags: ["metal", "2000s", "alt"] },
        { name: "Evanescence", tags: ["rock", "2000s", "goth"] },
        { name: "Paramore", tags: ["rock", "2000s", "pop punk"] },
        { name: "My Chemical Romance", tags: ["rock", "2000s", "emo"] },
        { name: "Fall Out Boy", tags: ["rock", "2000s", "pop punk"] },
        { name: "The Roots", tags: ["hip-hop", "live", "classic"] },
        { name: "Run-D.M.C.", tags: ["hip-hop", "80s", "classic"] },
        { name: "Public Enemy", tags: ["hip-hop", "80s", "political"] },
        { name: "Nas", tags: ["hip-hop", "90s", "classic"] },
        { name: "Kacey Musgraves", tags: ["country", "2010s", "pop"] },
        { name: "Johnny Cash", tags: ["country", "classic", "outlaw"] },
        { name: "Dolly Parton", tags: ["country", "classic", "pop"] },
        { name: "Willie Nelson", tags: ["country", "classic", "outlaw"] },
        { name: "Sturgill Simpson", tags: ["country", "2010s", "alt"] },
        { name: "Chris Stapleton", tags: ["country", "2010s", "soul"] },
        { name: "The Chicks", tags: ["country", "2000s", "pop"] },
        { name: "Garth Brooks", tags: ["country", "90s", "arena"] },
        { name: "Sufjan Stevens", tags: ["indie", "2000s", "folk"] },
        { name: "Bon Iver", tags: ["indie", "2000s", "folk"] },
        { name: "Beach House", tags: ["dream pop", "2000s", "indie"] },
        { name: "The xx", tags: ["indie", "2000s", "minimal"] },
        { name: "CHVRCHES", tags: ["synth", "2010s", "pop"] },
        { name: "Sigur Ros", tags: ["post-rock", "2000s", "ambient"] },
        { name: "Explosions in the Sky", tags: ["post-rock", "2000s", "instrumental"] },
        { name: "Godspeed You! Black Emperor", tags: ["post-rock", "90s", "experimental"] },
        { name: "Khruangbin", tags: ["psychedelic", "2010s", "funk"] },
        { name: "Parcels", tags: ["funk", "2010s", "disco"] },
        { name: "Cigarettes After Sex", tags: ["dream pop", "2010s", "slowcore"] },
        { name: "Fontaines D.C.", tags: ["post-punk", "2010s", "irish"] },
        { name: "Idles", tags: ["post-punk", "2010s", "punk"] },
        { name: "Black Country, New Road", tags: ["art rock", "2020s", "post-rock"] },
        { name: "The Smile", tags: ["art rock", "2020s", "indie"] },
        { name: "Olivia Rodrigo", tags: ["pop", "2020s", "rock"] },
        { name: "Doja Cat", tags: ["pop", "2020s", "hip-hop"] },
        { name: "Tyler, The Creator", tags: ["hip-hop", "2010s", "experimental"] },
        { name: "Rina Sawayama", tags: ["pop", "2020s", "alt"] },
        { name: "Erykah Badu", tags: ["r&b", "90s", "neo-soul"] },
        { name: "D'Angelo", tags: ["r&b", "90s", "neo-soul"] },
        { name: "Bruno Mars", tags: ["pop", "2010s", "funk"] },
        { name: "Silk Sonic", tags: ["r&b", "2020s", "funk"] }
      ];

      const RECO_THRESHOLD = 50;
      const bands = MASTER_BANDS;

      const ratingWeights = {
        love: 2.0,
        like: 1.0,
        dont: -0.6,
        hate: -1.4,
        never: 0.0
      };

      const state = {
        index: 0,
        order: [],
        ratings: new Map(),
        tagScores: new Map(),
        neverHeard: new Set(),
        ratedCount: 0
      };

      const bandName = document.getElementById("bandName");
      const progressText = document.getElementById("progressText");
      const meterFill = document.getElementById("meterFill");
      const results = document.getElementById("results");
      const finishBtn = document.getElementById("finishBtn");
      const resetBtn = document.getElementById("resetBtn");
      const scoreBox = document.getElementById("scoreBox");

      function shuffle(list) {
        const arr = [...list];
        for (let i = arr.length - 1; i > 0; i -= 1) {
          const j = Math.floor(Math.random() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
      }

      function init() {
        state.order = shuffle(bands.map((_, i) => i));
        state.index = 0;
        state.ratings.clear();
        state.tagScores.clear();
        state.neverHeard.clear();
        state.ratedCount = 0;
        results.classList.remove("active");
        results.innerHTML = "";
        finishBtn.disabled = true;
        nextBand();
        updateStatus();
      }

      function nextBand() {
        if (state.index >= state.order.length) {
          state.order = shuffle(bands.map((_, i) => i));
          state.index = 0;
        }
        const band = bands[state.order[state.index]];
        bandName.textContent = band.name;
      }

      function updateStatus() {
        progressText.textContent = `${state.ratedCount} rated`;
        const pct = Math.min(100, Math.round((state.ratedCount / RECO_THRESHOLD) * 100));
        meterFill.style.width = `${pct}%`;
        const ready = state.ratedCount >= RECO_THRESHOLD;
        scoreBox.textContent = `${ready ? "Recommendations ready" : `Rate ${RECO_THRESHOLD - state.ratedCount} more for recos`} • Never heard: ${state.neverHeard.size}`;
        finishBtn.disabled = !ready;
        finishBtn.textContent = ready ? "Show Me My Recommendations" : `Rate ${RECO_THRESHOLD - state.ratedCount} more`;
      }

      function applyRating(band, rating) {
        const weight = ratingWeights[rating];
        for (const tag of band.tags) {
          const current = state.tagScores.get(tag) ?? 0;
          state.tagScores.set(tag, current + weight);
        }
      }

      function handleRating(rating) {
        if (state.index >= state.order.length) return;
        const band = bands[state.order[state.index]];
        state.ratings.set(band.name, rating);
        if (rating === "never") {
          state.neverHeard.add(band.name);
        } else {
          state.neverHeard.delete(band.name);
        }
        applyRating(band, rating);
        state.index += 1;
        state.ratedCount += 1;
        updateStatus();
        nextBand();
      }

      function scoreBand(band) {
        let score = 0;
        for (const tag of band.tags) {
          score += state.tagScores.get(tag) ?? 0;
        }
        return score / band.tags.length;
      }

      function showRecommendations() {
        const neverList = bands.filter(b => state.neverHeard.has(b.name));
        const scored = neverList
          .map(b => ({ ...b, score: scoreBand(b) }))
          .sort((a, b) => b.score - a.score);

        results.classList.add("active");
        results.innerHTML = "";

        const header = document.createElement("div");
        header.className = "rec";
        const totalNever = neverList.length;
        const hasRatings = state.tagScores.size > 0;
        header.innerHTML = `
          <h4>Recommendations</h4>
          <p>${totalNever === 0 ? "You rated every band." : `From ${totalNever} never-heard bands.`} ${hasRatings ? "Sorted by your taste profile." : "No taste profile yet — showing random picks."}</p>
        `;
        results.appendChild(header);

        const picks = (hasRatings ? scored : shuffle(neverList).map(b => ({ ...b, score: 0 }))).slice(0, 8);

        if (picks.length === 0) {
          const empty = document.createElement("div");
          empty.className = "rec";
          empty.innerHTML = "<h4>No picks left</h4><p>Mark a few bands as “Never heard of” to get recommendations.</p>";
          results.appendChild(empty);
          return;
        }

        for (const band of picks) {
          const item = document.createElement("div");
          item.className = "rec";
          const tagLine = band.tags.join(" • ");
          const scoreText = hasRatings ? `Match score: ${band.score.toFixed(2)}` : "";
          item.innerHTML = `<h4>${band.name}</h4><p>${tagLine}${scoreText ? ` — ${scoreText}` : ""}</p>`;
          results.appendChild(item);
        }
      }

      document.querySelectorAll("button[data-rating]").forEach(btn => {
        btn.addEventListener("click", () => handleRating(btn.dataset.rating));
      });

      finishBtn.addEventListener("click", showRecommendations);
      resetBtn.addEventListener("click", init);

      init();
    </script>
  </body>
</html>
